package advancedDictionaryManager;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class WordController implements DictionaryProgram {

    // 단어 사전: 단어(key) → 뜻 목록(value)
    private Map<String, List<String>> dictionary = new HashMap<>();

    // 기본 생성자
    public WordController() {
        dictionary.put("apple", new ArrayList<>(Arrays.asList("사과")));
        dictionary.put("banana", new ArrayList<>(Arrays.asList("바나나")));
        dictionary.put("grape", new ArrayList<>(Arrays.asList("포도")));
        dictionary.put("peach", new ArrayList<>(Arrays.asList("복숭아")));
        dictionary.put("lemon", new ArrayList<>(Arrays.asList("레몬")));
    }

    // 매개변수 생성자
    public WordController(Map<String, List<String>> dictionary) {
        this.dictionary = dictionary;
    }

    @Override
    public void addDict(Scanner scan) {
        System.out.print("단어를 입력하세요: ");
        String voca = scan.next();

        if (dictionary.containsKey(voca)) {
            System.out.println("이미 등록된 단어입니다. 뜻을 추가합니다.");
            System.out.print("추가할 뜻을 입력하세요: ");
            String meaning = scan.next();
            dictionary.get(voca).add(meaning);
        } else {
            System.out.print("뜻을 입력하세요: ");
            String meaning = scan.next();
            List<String> meanings = new ArrayList<>();
            meanings.add(meaning);
            dictionary.put(voca, meanings);
        }
    }

    @Override
    public void searchVoca(Scanner scan) {
        System.out.print("검색할 단어를 입력하세요: ");
        String voca = scan.next();

        if (dictionary.containsKey(voca)) {
            System.out.println(voca + " : " + String.join(", ", dictionary.get(voca)));
        } else {
            System.out.println("등록되지 않은 단어입니다.");
        }
    }
    
    public void appendMeaning(Scanner scan) {
        System.out.print("뜻을 추가할 단어를 입력하세요: ");
        String voca = scan.next();

        if (dictionary.containsKey(voca)) {
            System.out.print("추가할 뜻을 입력하세요: ");
            String newMeaning = scan.next();

            List<String> meanings = dictionary.get(voca);
            meanings.add(newMeaning);
            System.out.println("뜻이 추가되었습니다.");
        } else {
            System.out.println("해당 단어는 등록되어 있지 않습니다.");
        }
    }

    public void reviseMeaning(Scanner scan) {
        System.out.print("단어 입력: ");
        String voca = scan.next();

        if (dictionary.containsKey(voca)) {
            List<String> meanings = dictionary.get(voca);
            System.out.println("현재 뜻 목록:");
            for (int i = 0; i < meanings.size(); i++) {
                System.out.println((i + 1) + ". " + meanings.get(i));
            }

            System.out.print("수정할 뜻 번호 입력: ");
            int index = scan.nextInt() - 1;

            if (index >= 0 && index < meanings.size()) {
                System.out.print("새로운 뜻 입력: ");
                String newMeaning = scan.next();
                meanings.set(index, newMeaning);
                System.out.println("뜻이 수정되었습니다.");
            } else {
                System.out.println("잘못된 번호입니다.");
            }
        } else {
            System.out.println("단어가 등록되어 있지 않습니다.");
        }
    }


    @Override
    public void printVoca() {
        System.out.println("--- 단어 목록 ---");
        for (Map.Entry<String, List<String>> entry : dictionary.entrySet()) {
            System.out.println(entry.getKey() + " : " + String.join(", ", entry.getValue()));
        }
    }

    @Override
    public void deleteVoca(Scanner scan) {
        System.out.print("삭제할 단어를 입력하세요: ");
        String voca = scan.next();

        if (dictionary.remove(voca) != null) {
            System.out.println("삭제되었습니다.");
        } else {
            System.out.println("해당 단어는 존재하지 않습니다.");
        }
    }

    public Map<String, List<String>> getDictionary() {
        return dictionary;
    }

    public void setDictionary(Map<String, List<String>> dictionary) {
        this.dictionary = dictionary;
    }
}