package day17;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public class File05 {

    public static void main(String[] args) throws IOException {
        /* 명단 출력 / 합계 / 평균 출력
         * 점수가 80점 이상인 학생의 명단과 총 인원수 출력
         * 
         * 읽어들이는 파일은 모두 String
         * 계산을 위해서는 변환이 필요
         * Integer.parseInt()
         */

        // Map 생성: 학생 이름 / 점수
        Map<String, Integer> stdScoreMap = new HashMap<>();

        String fileName = "D:\\web_0826_PJH\\memo\\sample.txt";
        BufferedReader br = new BufferedReader(new FileReader(fileName));

        String line;
        while ((line = br.readLine()) != null) {
            // 예: "홍길동,85"
            String[] parts = line.split(",");
            if (parts.length != 2) continue;

            String name = parts[0].trim();
            int score = Integer.parseInt(parts[1].trim());

            stdScoreMap.put(name, score);
        }
        br.close();

        // 전체 명단 출력
        System.out.println("-- 전체 명단 --");
        for (Map.Entry<String, Integer> entry : stdScoreMap.entrySet()) {
            System.out.println(entry.getKey() + ": " + entry.getValue() + "점");
        }

        // 합계 및 평균 계산
        int total = 0;
        for (int score : stdScoreMap.values()) {
            total += score;
        }
        double average = (double) total / stdScoreMap.size();

        System.out.println("\n총점: " + total);
        System.out.println("평균: " + String.format("%.2f", average));

        // 80점 이상 학생 명단 출력
        System.out.println("\n-- 80점 이상 학생 명단 --");
        int count = 0;
        for (Map.Entry<String, Integer> entry : stdScoreMap.entrySet()) {
            if (entry.getValue() >= 80) {
                System.out.println(entry.getKey() + ": " + entry.getValue() + "점");
                count++;
            }
        }
        System.out.println("총 인원수: " + count + "명");
    }
}
